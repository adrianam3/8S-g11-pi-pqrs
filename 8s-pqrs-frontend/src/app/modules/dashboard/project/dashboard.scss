/* ===========================
   PÁGINA DASHBOARD (SCOPED)
   =========================== */

/* Evitar doble marco: el componente y su wrapper quedan transparentes.
   El fondo gris se aplica SOLO al contenedor del layout vía :host-context */
:host {
  display: block;
  background: transparent !important;
  padding: 0 !important;
  border-radius: 0 !important;
  box-shadow: none !important;
}

/* wrapper interno (si lo usas en el HTML) */
.dashboard-page {
  background: transparent !important;
  padding: 0 !important;
  border-radius: 0 !important;
  box-shadow: none !important;
  width: 100%;
}

/* Fondo gris claro SOLO cuando este componente está dentro del layout */
:host-context(.layout-main-container),
:host-context(.layout-main),
:host-context(.layout-content) {
  background: #f5f7fb !important; /* gris claro tipo dashboard */
}

/* ===========================
   TOOLBAR (filtros)
   =========================== */
.toolbar-sticky {
  position: sticky;
  top: 0;          /* ajusta si tu layout tiene header fijo más alto */
  z-index: 10;
}

/* ===========================
   TIPOGRAFÍA / UTILIDADES
   =========================== */
.kpi {
  font-size: 2rem;
  font-weight: 700;
  line-height: 1.1;
}

.muted {
  color: var(--text-color-secondary);
  font-size: .85rem;
}

.text-right { text-align: right; }

.empty-state {
  padding: 1.25rem;
  color: var(--text-color-secondary);
  text-align: center;
}

/* ===========================
   CARDS / PANELS
   =========================== */
:host ::ng-deep .p-card,
:host ::ng-deep .p-panel {
  background: #ffffff;                 /* tarjetas en blanco */
  border-radius: .75rem;
  box-shadow: 0 2px 8px rgba(0,0,0,.04);
}

:host ::ng-deep .p-card .p-card-title {
  font-weight: 600;
}

:host ::ng-deep .p-card .p-card-body {
  overflow: hidden;                    /* evita que el canvas sobresalga */
}

/* KPIs: misma altura en la primera fila */
.kpi-card {
  min-height: 112px;                   /* sube a 128px si quieres más alto */
  display: flex;
  flex-direction: column;
  justify-content: space-between;
}

/* Cuerpo flexible para charts dentro de cards */
.eq-card .p-card-body {
  display: flex;
  flex-direction: column;
  gap: .5rem;
  height: 100%;
}

/* Contenedores de gráficos con alturas estándar */
.chart-holder { flex: 1; width: 100%; }
.chart-240 { height: 240px; }
.chart-300 { height: 300px; }

/* El canvas del chart llena siempre su contenedor */
:host ::ng-deep .p-chart,
:host ::ng-deep .p-chart canvas {
  width: 100% !important;
  height: 100% !important;
}

/* ===========================
   GRID / GUTTERS (espacios)
   =========================== */
/* Fallback del grid por si PrimeFlex fuera pisado por otro CSS */
:host .grid {
  display: flex;
  flex-wrap: wrap;
  margin-left: -0.75rem;   /* gutters más anchos para ver esquinas redondeadas */
  margin-right: -0.75rem;
}

:host .grid > [class*="col-"] {
  padding-left: 0.75rem;
  padding-right: 0.75rem;
  box-sizing: border-box;
  margin-bottom: 1rem;     /* espacio vertical entre tarjetas */
}

/* Columnas base */
:host .col-12 { flex: 0 0 100%; max-width: 100%; }

/* sm: >=576px */
@media (min-width: 576px) {
  :host .sm\:col-6 { flex: 0 0 50%; max-width: 50%; }
}

/* md: >=768px */
@media (min-width: 768px) {
  :host .md\:col-6 { flex: 0 0 50%; max-width: 50%; }
  :host .md\:col-3 { flex: 0 0 25%; max-width: 25%; }
}

/* lg: >=992px */
@media (min-width: 992px) {
  :host .lg\:col-3 { flex: 0 0 25%; max-width: 25%; }
  :host .lg\:col-6 { flex: 0 0 50%; max-width: 50%; }
}

/* xl: >=1200px */
@media (min-width: 1200px) {
  :host .xl\:col-8 { flex: 0 0 66.6667%; max-width: 66.6667%; }
  :host .xl\:col-4 { flex: 0 0 33.3333%; max-width: 33.3333%; }
}

/* ===========================
   TABS (PrimeNG TabsModule)
   =========================== */
.tabs-compact {
  /* lista de pestañas */
  ::ng-deep .p-tablist {
    display: flex;
    align-items: center;
    gap: .75rem;
    border-bottom: 1px solid var(--surface-border);
    padding: 0 .25rem;
    margin: .25rem 0 .75rem;
  }

  /* botón de pestaña */
  ::ng-deep button[p-tab] {
    background: transparent;
    border: 0;
    color: var(--text-color-secondary);
    padding: .75rem 0;
    margin: 0 1rem 0 0;
    font-weight: 600;
    border-bottom: 2px solid transparent;
    outline: none;
    cursor: pointer;
  }

  /* activo */
  ::ng-deep button[p-tab][data-state="active"] {
    color: var(--primary-color);
    border-bottom-color: var(--primary-color);
  }

  /* hover/focus */
  ::ng-deep button[p-tab]:hover,
  ::ng-deep button[p-tab]:focus-visible {
    color: var(--primary-color);
  }

  /* paneles ocupan 100% */
  ::ng-deep .p-tabpanels,
  ::ng-deep .p-tabpanel { width: 100%; }
}

/* ===========================
   Responsivo fino
   =========================== */
@media (max-width: 991px) {
  .chart-240 { height: 220px; }
  .chart-300 { height: 260px; }
  .kpi { font-size: 1.7rem; }
}
@media (max-width: 640px) {
  .chart-240, .chart-300 { height: 220px; }
  .kpi { font-size: 1.5rem; }
  .tabs-compact ::ng-deep .p-tablist { gap: .5rem; }
}


/* ===== TabsModule: quitar fondo/blancos por defecto ===== */
:host ::ng-deep .p-tabs {
  background: transparent !important;
  box-shadow: none !important;
  border: 0 !important;
}

:host ::ng-deep .p-tabs .p-tablist {
  background: transparent !important;
  border-bottom: 1px solid var(--surface-border) !important; /* dejamos solo el subrayado */
}

:host ::ng-deep .p-tabs .p-tabpanels {
  background: transparent !important;  /* <- clave */
  border: 0 !important;
  box-shadow: none !important;
}

:host ::ng-deep .p-tabs .p-tabpanel {
  background: transparent !important;  /* <- clave */
  border-radius: 0 !important;
  padding: 0 !important;               /* opcional: que no meta padding extra */
}

/* Si usas mi clase .tabs-compact, aplica también allí por si cambia el selector */
.tabs-compact ::ng-deep .p-tabpanels,
.tabs-compact ::ng-deep .p-tabpanel,
.tabs-compact ::ng-deep .p-tabs {
  background: transparent !important;
  border: 0 !important;
  box-shadow: none !important;
}

/* ===== TabsModule: usar el mismo fondo del tema ===== */
/* Gris del lienzo del tema (Sakai/PrimeNG) */
:host ::ng-deep .p-tabs,
:host ::ng-deep .p-tabs .p-tablist,
:host ::ng-deep .p-tabs .p-tabpanels,
:host ::ng-deep .p-tabs .p-tabpanel {
  background: var(--surface-ground) !important;
}

/* Si tu barra de filtros dentro del dashboard debe “flotar” sobre ese ground,
   mantenla como card blanca (ya lo tienes), pero si la quieres también
   con el ground del tema, descomenta esta línea: */
/* .toolbar-sticky { background: var(--surface-ground) !important; } */

/* Aseguramos que las tarjetas sigan blancas y con sombra suave */
:host ::ng-deep .p-card,
:host ::ng-deep .p-panel {
  background: var(--surface-card) !important; /* blanco del tema */
  box-shadow: 0 2px 8px rgba(0,0,0,.04);
  border-radius: .75rem;
}
/* --- TabsModule: tab activo en VERDE (solo en este componente) --- */
:root {
  /* si quieres cambiar el tono, ajusta esta variable */
  --tab-active-green: #10b981; /* verde tipo "emerald" */
}

.tabs-compact {
  /* color por defecto de las etiquetas */
  ::ng-deep button[p-tab] {
    color: var(--text-color-secondary);
    border-bottom: 2px solid transparent;
    transition: color .15s ease, border-color .15s ease;
  }

  /* TAB ACTIVO: texto verde + subrayado verde */
  ::ng-deep button[p-tab][data-state="active"] {
    color: var(--tab-active-green) !important;
    border-bottom-color: var(--tab-active-green) !important;
    font-weight: 700; /* opcional */
  }

  /* hover/focus también en verde */
  ::ng-deep button[p-tab]:hover,
  ::ng-deep button[p-tab]:focus-visible {
    color: var(--tab-active-green);
  }

  /* iconos dentro del botón del tab */
  ::ng-deep button[p-tab] .pi {
    color: currentColor; /* hereda el verde cuando está activo/hover */
  }

  /* línea inferior del tablist (gris) para contraste */
  ::ng-deep .p-tablist {
    border-bottom: 1px solid var(--surface-border) !important;
  }
}

//////mas
/// 
/// 

/* ====== Activo en VERDE para TabsModule (robusto a variaciones del tema) ====== */
:root { --tab-active-green: #10b981; } /* cambia el tono si quieres */

.tabs-compact {
  /* color base de las etiquetas */
  ::ng-deep .p-tablist [role="tab"] {
    color: var(--text-color-secondary);
    border-bottom: 2px solid transparent;
    transition: color .15s ease, border-color .15s ease;
  }

  /* Estados de tab ACTIVO que usa PrimeNG (cubre varias variantes) */
  ::ng-deep .p-tablist [role="tab"][aria-selected="true"],
  ::ng-deep .p-tablist .p-highlight[role="tab"],
  ::ng-deep .p-tablist .p-tab.p-tab-active,
  ::ng-deep .p-tablist button[aria-selected="true"],
  ::ng-deep .p-tablist button.p-highlight,
  ::ng-deep .p-tablist button.p-tab-active,
  ::ng-deep .p-tablist .p-tab[data-state="active"] {
    color: var(--tab-active-green) !important;
    border-bottom-color: var(--tab-active-green) !important;
    font-weight: 700; /* opcional */
  }

  /* Barra activa que algunos temas dibujan bajo la pestaña */
  ::ng-deep .p-tablist-active-bar {
    background-color: var(--tab-active-green) !important;
  }

  /* Hover/focus */
  ::ng-deep .p-tablist [role="tab"]:hover,
  ::ng-deep .p-tablist [role="tab"]:focus-visible {
    color: var(--tab-active-green);
  }

  /* Iconos dentro del botón del tab heredan el color */
  ::ng-deep .p-tablist [role="tab"] .pi { color: currentColor; }

  /* Línea inferior gris del tablist para contraste */
  ::ng-deep .p-tablist {
    border-bottom: 1px solid var(--surface-border) !important;
  }
}

// otro
:root { --tab-active-green: #10b981; } /* cambia el tono si quieres */

.tabs-compact {
  /* estilo base de los tabs */
  ::ng-deep .p-tablist button[p-tab] {
    color: var(--text-color-secondary);
    border-bottom: 2px solid transparent;
    background: transparent;
    transition: color .15s ease, border-color .15s ease;
  }

  /* ACTIVO: nuestra clase propia */
  ::ng-deep .p-tablist button[p-tab].is-active {
    color: var(--tab-active-green) !important;
    border-bottom-color: var(--tab-active-green) !important;
    font-weight: 700; /* opcional */
  }

  /* Hover/focus consistente */
  ::ng-deep .p-tablist button[p-tab]:hover,
  ::ng-deep .p-tablist button[p-tab]:focus-visible {
    color: var(--tab-active-green);
  }

  /* Icono hereda el color del texto */
  ::ng-deep .p-tablist button[p-tab] .pi { color: currentColor; }

  /* Si tu tema dibuja una barrita activa, ponla verde también */
  ::ng-deep .p-tablist-active-bar {
    background-color: var(--tab-active-green) !important;
  }
}
.tabs-compact ::ng-deep .p-tablist {
  border-bottom: 1px solid var(--surface-border) !important;
}

//

/* === Verde para TabsModule (forzado y local) === */
.tabs-compact {
  /* hacemos que dentro de este bloque el primario sea verde */
  --primary-color: #10b981; /* emerald; cambia si quieres otro tono */

  /* base */
  ::ng-deep .p-tablist [role="tab"] {
    color: var(--text-color-secondary);
    border-bottom: 2px solid transparent;
    background: transparent;
    transition: color .15s ease, border-color .15s ease;
  }

  /* ACTIVO (cubriendo todas las variantes del tema) */
  ::ng-deep .p-tablist [role="tab"].is-active,
  ::ng-deep .p-tablist [role="tab"][aria-selected="true"],
  ::ng-deep .p-tablist .p-highlight[role="tab"],
  ::ng-deep .p-tablist .p-tab.p-tab-active,
  ::ng-deep .p-tablist button[p-tab].is-active {
    color: var(--primary-color) !important;
    border-bottom-color: var(--primary-color) !important;
    font-weight: 700;
  }

  /* barra activa que dibuja PrimeNG */
  ::ng-deep .p-tablist-active-bar {
    background-color: var(--primary-color) !important;
    height: 2px !important;
  }

  /* hover/focus */
  ::ng-deep .p-tablist [role="tab"]:hover,
  ::ng-deep .p-tablist [role="tab"]:focus-visible {
    color: var(--primary-color);
  }

  /* el icono hereda el color del texto */
  ::ng-deep .p-tablist [role="tab"] .pi { color: currentColor; }
}

/* Encabezado de KPI con icono */
.kpi-header {
  display: flex;
  align-items: center;
  gap: .5rem;
  font-weight: 600;
  color: var(--text-color);
  margin-bottom: .25rem;
}
.kpi-icon { font-size: 1.1rem; opacity: .9; }

/* Colores de icono */
.kpi-blue   { color: #3b82f6; }  /* blue-500   */
.kpi-indigo { color: #6366f1; }  /* indigo-500 */
.kpi-green  { color: #10b981; }  /* emerald-500*/
.kpi-teal   { color: #14b8a6; }  /* teal-500   */

// --

/* ===== KPI headers con icono + tooltip ===== */
.kpi-header {
  display: inline-flex;
  align-items: center;
  gap: .5rem;
  font-weight: 600;
}

.kpi-ico {
  width: 28px; height: 28px;
  border-radius: 50%;
  display: inline-flex; align-items: center; justify-content: center;
  font-size: 1rem;
  color: var(--primary-color);
  background: color-mix(in srgb, var(--primary-color) 15%, transparent);
}

.kpi-ico.warn {
  color: #ef4444;
  background: rgba(239, 68, 68, .12);
}

.kpi-ico.info {
  color: #3b82f6;
  background: rgba(59, 130, 246, .12);
}

.kpi-ico.ok {
  color: #10b981;
  background: rgba(16, 185, 129, .12);
}

//--
// /* ====== Fila de 5 KPIs (20% cada uno en desktop) ====== */
// .kpi-5 { display: flex; flex-wrap: wrap; margin-left: -0.75rem; margin-right: -0.75rem; }
// .kpi-5 .kpi-col { padding-left: .75rem; padding-right: .75rem; margin-bottom: 1rem; box-sizing: border-box; }

// /* Desktop ≥1200px: 5 por fila (20%) */
// @media (min-width: 1200px) {
//   .kpi-5 .kpi-col { flex: 0 0 20%; max-width: 20%; }
// }

// /* Laptop/Tablet ancho: 3 por fila */
// @media (min-width: 768px) and (max-width: 1199.98px) {
//   .kpi-5 .kpi-col { flex: 0 0 33.3333%; max-width: 33.3333%; }
// }

// /* Tablet chico: 2 por fila */
// @media (min-width: 576px) and (max-width: 767.98px) {
//   .kpi-5 .kpi-col { flex: 0 0 50%; max-width: 50%; }
// }

// /* Móvil: 1 por fila */
// @media (max-width: 575.98px) {
//   .kpi-5 .kpi-col { flex: 0 0 100%; max-width: 100%; }
// }

/* Alineación vertical del header con icono */
.kpi-header { display: flex; align-items: center; gap: .5rem; font-weight: 600; color: var(--text-color-secondary); }
.kpi-icon { font-size: 1.1rem; line-height: 1; }


// --

/* ====== KPIs compactos con icono en header ====== */
.kpi-header{
  display: flex;
  align-items: center;      /* <-- alinea el icono con el texto */
  gap: .5rem;
  margin-bottom: .25rem;
  font-weight: 600;
  color: var(--text-color-secondary);
}

.kpi-icon{
  font-size: 1.1rem;
  line-height: 1;           /* <-- evita que “salte” hacia abajo */
  display: inline-block;
}

/* Colores de iconos (igual que en Encuestas) */
.kpi-blue   { color: #3b82f6; }
.kpi-indigo { color: #6366f1; }
.kpi-teal   { color: #14b8a6; }
.kpi-green  { color: #22c55e; }
.kpi-purple { color: #8b5cf6; }

/* Tarjeta KPI mini (menos padding, más compacta) */
.kpi-card.kpi-mini .p-card-body{
  padding: .85rem 1rem;
  display: flex;
  flex-direction: column;
  gap: .25rem;
}

// /* Fila de KPIs en grid uniforme */
// .kpi-row{
//   display: grid;
//   gap: 1rem;
//   grid-template-columns: repeat(1, minmax(0, 1fr));
// }

// /* 5 columnas en ≥768px */
// @media (min-width: 768px){
//   .kpi-row.kpi-5{ grid-template-columns: repeat(5, 1fr); }
// }

// /* Si algún día usas 4 KPIs, tendrás esto listo */
// @media (min-width: 768px){
//   .kpi-row.kpi-4{ grid-template-columns: repeat(4, 1fr); }
// }


// --

/* En móvil se apilan, en pantallas medianas 3-4, y en desktop 5 exactas */
.kpi-row{
  display: grid;
  gap: 1rem;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
}

@media (min-width: 1200px){
  .kpi-row.kpi-5 { grid-template-columns: repeat(5, 1fr); } /* fuerzo 5 en desktop amplio */
}

/* Alineación fina del icono dentro del header de la tarjeta KPI */
.kpi-header {
  display: inline-flex;
  align-items: center;     /* centra verticalmente texto + icono */
  gap: .5rem;
  line-height: 1.2;        /* un poco más de altura de línea ayuda a ver “más abajo” */
}

/* baja sutilmente el icono para que no se vea “flotando” arriba */
.kpi-header .kpi-icon {
  font-size: 1.1rem;
  line-height: 1;
  display: inline-flex;
  align-items: center;
  transform: translateY(2px);  /* <- mueve hacia abajo (ajusta a 1px/3px si quieres) */
  opacity: .9;
}
/* Header de las cards más compacto (opcional) */
:host ::ng-deep .p-card .p-card-header {
  padding: .75rem 1rem .5rem; /* top, lados, bottom */
}

// 27/09/2025

/* Lista tipo "Best Selling Products" */
.kpi-list {
  list-style: none;
  margin: 0;
  padding: 0;

  li {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 1rem;
    padding: .75rem 0;
    border-bottom: 1px solid var(--surface-border);
  }

  .kpi-left {
    min-width: 0; /* por si el nombre es largo */
  }

  .kpi-name {
    font-weight: 600;
    line-height: 1.2;
  }

  .kpi-sub {
    font-size: .85rem;
    opacity: .7;
    margin-top: .2rem;
  }

  .kpi-right {
    width: 180px; /* ancho fijo para barra y % */
    text-align: right;

    .kpi-pct {
      display: block;
      font-weight: 600;
      margin-bottom: .25rem;
    }

    /* afina altura de la barra */
    :host ::ng-deep .p-progressbar {
      height: .5rem;
    }
  }
}

/* Colores de barra según clase */
:host ::ng-deep .pct-green .p-progressbar .p-progressbar-value { background: var(--green-500); }
:host ::ng-deep .pct-teal  .p-progressbar .p-progressbar-value { background: var(--teal-500); }
:host ::ng-deep .pct-orange .p-progressbar .p-progressbar-value { background: var(--orange-500); }
:host ::ng-deep .pct-red    .p-progressbar .p-progressbar-value { background: var(--red-500); }

/* Tabla de detalle por segmento */
:host ::ng-deep .seg-table {
  .p-datatable-thead > tr > th {
    font-weight: 700;
    font-size: .85rem;
    letter-spacing: .02em;
    background: var(--surface-ground);
  }
  .p-datatable-tbody > tr > td {
    padding: .9rem .75rem;
    border-color: var(--surface-border);
  }
  .seg-name { font-weight: 700; color: var(--text-color); }
  .num { text-align: right; }
}

/* Pastillas de porcentaje (Tasa %) */
.pct-badge {
  display: inline-block;
  min-width: 48px;
  text-align: center;
  padding: .15rem .5rem;
  border-radius: 999px;
  font-weight: 600;
  font-size: .85rem;
  line-height: 1.1;
}

.pct-green  { color: #0f5132; background: #d1e7dd; }
.pct-teal   { color: #0b525b; background: #cfeffd; }
.pct-orange { color: #664d03; background: #fff3cd; }
.pct-red    { color: #842029; background: #f8d7da; }

/* Utilitarios */
.text-right { text-align: right; }

//
// /* asegúrate de que las filas acepten altura explícita */
// :host ::ng-deep .seg-table .p-datatable-tbody > tr {
//   height: auto; /* por si algún tema fija otra cosa */
// }
:host ::ng-deep .seg-table .p-datatable-tbody > tr { height: auto; }

:host ::ng-deep .seg-table table {
  table-layout: fixed;
  width: 100%;
}


/* Que la tabla no “salte” y mida bien */
:host ::ng-deep .seg-table table { table-layout: fixed; width: 100%; }
:host ::ng-deep .seg-table .p-datatable-tbody > tr > td {
  vertical-align: top;          /* si hay wrap, crece hacia abajo */
  word-break: break-word;       /* evita overflow con textos largos */
}

@media (max-width: 640px) {
  :host ::ng-deep .seg-table .p-datatable-tbody > tr > td {
    padding: .6rem .5rem;
  }
}

:host ::ng-deep .seg-table .p-datatable-wrapper {
  max-height: 420px;       /* ajusta si quieres */
  overflow: auto;
}
:host ::ng-deep .seg-table .p-datatable-thead > tr > th {
  position: sticky;
  top: 0;
  z-index: 1;
}


/* Igualar altura de las dos tarjetas (canal/agencia) */
.equalize-cards { align-items: stretch; }              /* estira las columnas */
.equalize-cards > .eq-col { display: flex; }           /* columna = flex item */
.equalize-cards .fill-card {                           /* card ocupa 100% */
  display: flex;
  flex-direction: column;
  width: 100%;
}
:host ::ng-deep .equalize-cards .fill-card .p-card-body {
  display: flex;
  flex-direction: column;
  height: 100%;                                        /* cuerpo estira */
}


/* Igualar altura de las 2 tarjetas (CANAL / AGENCIA) */
.equalize-cards {         /* es un .grid (display:flex) */
  align-items: stretch;   /* que las columnas estiren a la misma altura */
}

.eq-col {                 /* cada columna */
  display: flex;          /* permite que la card llene la altura */
}

.fill-card {              /* clase aplicada al <p-card> */
  width: 100%;
}

.fill-card ::ng-deep .p-card {
  display: flex;
  flex-direction: column;
  flex: 1;               /* que la tarjeta crezca a la altura disponible */
}

.fill-card ::ng-deep .p-card-body {
  display: flex;
  flex-direction: column;
  flex: 1;               /* que el contenido también llene */
}
/* Pie de tabla (totales) */
:host ::ng-deep .seg-table .p-datatable-tfoot > tr > td,
:host ::ng-deep .seg-table .totals-row > td {
  font-weight: 700;
  background: var(--surface-ground);
  border-top: 2px solid var(--surface-border);
}
:host ::ng-deep .seg-table table {
  table-layout: fixed;
}


/* dashboard.scss */
.tablist-scroll {
  display: flex;
  gap: .5rem;
  overflow-x: auto;   /* <- clave para que no se recorte */
  padding-bottom: .25rem;
}
.tablist-scroll::-webkit-scrollbar { height: 6px; }


// detalle nps
// /* ===== Detalle NPS ===== */
// .nps-detail-card {
//   .nps-head {
//     display: flex;
//     align-items: center;
//     justify-content: space-between;
//     gap: .75rem;
//     padding: .25rem .25rem 0;
//   }
//   .nps-head-left .title { font-weight: 600; color: #111827; }
//   .nps-head-left .subtitle { font-size: .85rem; color: #6b7280; margin-top: .15rem; }
//   .nps-head-right {
//     font-weight: 800;
//     font-size: clamp(2.25rem, 4.2vw, 3.25rem); /* NPS GRANDE y responsivo */
//     line-height: 1;
//   }

//   .nps-row { margin-top: 1rem; }
//   .nps-row-label {
//     display: flex; align-items: center; justify-content: space-between;
//     font-size: .95rem; margin-bottom: .35rem;
//   }
//   .nps-row-label .lbl { color: #1f2937; font-weight: 600; }
//   .nps-row-label .pct { color: #6b7280; }

//   /* Barra con color dinámico via CSS variable */
//   .nps-bar.p-progressbar {
//     --bar-color: #10b981; /* fallback */
//     height: 12px; border-radius: 999px; background: #e9eef5;
//   }
//   .nps-bar .p-progressbar-value {
//     background: var(--bar-color) !important;
//     border-radius: 999px;
//     transition: width .3s ease, background .3s ease;
//   }
// }
// // .nps-detail-card {
// //   .nps-bar.p-progressbar {
// //     --bar-color: #10b981; /* fallback */
// //     height: 12px; border-radius: 999px; background: #e9eef5;
// //   }
// //   .nps-bar .p-progressbar-value {
// //     background: var(--bar-color) !important;
// //     border-radius: 999px;
// //     transition: width .3s ease, background .3s ease;
// //   }
// // }

/* Igualar alturas entre gauge y detalle */
.nps-eq-row > [class*="col-"] {
  display: flex;
}
.nps-eq-row .eq-card {
  height: 100%;
  width: 100%;
}

/* Cabecera del card Detalle */
.nps-detail-card .p-card-body {
  display: flex;
  flex-direction: column;
  height: 100%;
}
.nps-header {
  display: flex;
  align-items: end;
  justify-content: space-between;
  padding-bottom: .5rem;
  margin-bottom: .5rem;
  border-bottom: 1px solid var(--surface-border, #e5e7eb);
}
.nps-subtitle {
  line-height: 1.1;
  font-weight: 600;
}
.nps-subtitle small {
  display: block;
  font-weight: 500;
  color: #6b7280;
}

/* Número grande del detalle, mismo azul del velocímetro */
.nps-score {
  font-weight: 800;
  font-size: clamp(28px, 4.5vw, 42px);
  color: #1e88e5;
}

/* Lista de barras con separación */
.nps-list {
  display: flex;
  flex-direction: column;
  gap: 16px;              /* ← separación entre Promotores/Pasivos/Detractores */
  margin-top: .75rem;
}
.nps-item .row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: .35rem;
  font-weight: 600;
}
.nps-item .pct {
  color: #6b7280;
  font-weight: 600;
}

/* Barra con más altura y bordes suaves */
.nps-bar {
  --track: #e9eef5;
  height: 12px;
  border-radius: 999px;
}
.nps-bar .p-progressbar {
  background: var(--track);
  border-radius: 999px !important;
  overflow: hidden;
}
.nps-bar .p-progressbar-value {
  border-radius: 999px !important;
}

// nps detalle

/* Badges pequeñas para % y NPS en tablas */
.badge {
  display: inline-block;
  padding: .2rem .5rem;
  border-radius: .5rem;
  font-size: .75rem;
  font-weight: 600;
  line-height: 1;
  color: #0f172a;
  background: #e5e7eb;
}
.badge-green  { background: #86efac; color:#065f46; }
.badge-lime   { background: #d9f99d; color:#3f6212; }
.badge-amber  { background: #fde68a; color:#854d0e; }
.badge-orange { background: #fdba74; color:#7c2d12; }
.badge-red    { background: #fecaca; color:#7f1d1d; }

.eq-card p-table { --row-gap: .25rem; }
.eq-card .p-datatable-tbody > tr > td { vertical-align: middle; }

/* (opcional) un poco más de espacio entre las dos nuevas tarjetas y lo de arriba */
.p-tabpanel .eq-card + .eq-card { margin-top: 1rem; }

// pqrs x tipo

/* ===== KPIs PQRs (dos filas) ===== */
.kpi-grid-2rows {
  display: grid;
  gap: 1rem;
  grid-template-columns: repeat(5, minmax(0, 1fr));
  grid-auto-rows: 140px; /* altura base de las tarjetas */
}

.kpi-grid-2rows .span-2-rows {
  grid-row: span 2;
}

.kpi-grid-2rows .kpi-card {
  height: 100%;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
}

.kpi-grid-2rows .kpi {
  font-size: 2rem;
  font-weight: 700;
}

.kpi-grid-2rows .kpi-header {
  display:flex; align-items:center; gap:.5rem;
}
.kpi-grid-2rows .kpi-icon { font-size: 1.25rem; }

/* Colores rápidos para iconos */
.kpi-indigo { color:#6366f1; }
.kpi-blue   { color:#3b82f6; }
.kpi-teal   { color:#14b8a6; }
.kpi-purple { color:#8b5cf6; }
.kpi-green  { color:#22c55e; }
.kpi-cyan   { color:#06b6d4; }
.kpi-orange { color:#f97316; }
.kpi-red    { color:#ef4444; }
.kpi-amber  { color:#f59e0b; }

/* Responsivo */
@media (max-width: 1199px) {
  .kpi-grid-2rows { grid-template-columns: repeat(3,minmax(0,1fr)); }
}
@media (max-width: 767px) {
  .kpi-grid-2rows { grid-template-columns: 1fr; grid-auto-rows: auto; }
  .kpi-grid-2rows .span-2-rows { grid-row: auto; } /* en mobile no forzamos dos filas */
}

// /* Centrado específico para el card del total */
// .kpi-card.kpi-center {
//   display: flex;
//   flex-direction: column;
// }

// .kpi-card.kpi-center .kpi-box {
//   flex: 1;                           /* ocupa el alto restante bajo el header */
//   display: flex;
//   flex-direction: column;
//   align-items: center;                /* centra horizontal */
//   justify-content: center;            /* centra vertical */
//   gap: .35rem;
//   text-align: center;
// }

// .kpi-card.kpi-center .kpi {
//   font-size: 2.25rem;                 /* opcional: un poco más grande */
//   font-weight: 700;
// }
/* Centrado total del card que tenga la clase kpi-center */


// .kpi-card.kpi-center {
//   /* nos aseguramos de que el body pueda usar toda la altura del card */
//   height: 100%;
// }

// /* PrimeNG <p-card> wrappers: hacemos que el body y el content ocupen y distribuyan la altura */
// .kpi-card.kpi-center .p-card-body {
//   display: flex;
//   flex-direction: column;
//   height: 100%;
// }
// .kpi-card.kpi-center .p-card-content {
//   flex: 1;                   /* ocupa todo lo que queda bajo el header */
//   display: flex;             /* para centrar nuestro contenedor interno */
// }

// /* el contenedor que envuelve el número y la delta */
// .kpi-card.kpi-center .kpi-box {
//   flex: 1;
//   width: 100%;
//   display: flex;
//   flex-direction: column;
//   align-items: center;       /* centro horizontal */
//   justify-content: center;   /* centro vertical */
//   gap: .4rem;
//   text-align: center;
// }

// /* hace el valor más grande y en negrita */
// .kpi-card.kpi-center .kpi {
//   font-size: 3.2rem;         /* ajusta si lo quieres aún más grande */
//   line-height: 1;
//   font-weight: 800;          /* negrita */
// }

// /* (opcional) la línea de delta un poco más discreta */
// .kpi-card.kpi-center .muted {
//   opacity: .7;
//   font-weight: 600;
// }
// .kpi-card.kpi-center { min-height: 190px; } /* ajusta a tu layout */

/* Forzar a p-card a distribuir altura entre header y content */
.kpi-card.kpi-center {
  min-height: 190px;            /* ajusta si quieres más alto */
}
.kpi-card.kpi-center .p-card-body {
  display: flex;
  flex-direction: column;
  height: 100%;
}
.kpi-card.kpi-center .p-card-content {
  flex: 1 1 auto;               /* ocupa todo lo que queda bajo el header */
  display: flex;                /* para poder centrar el contenedor */
  padding-top: 0.5rem;          /* opcional */
  padding-bottom: 0.5rem;       /* opcional */
}

/* Contenedor que centra horizontal y verticalmente tu número */
// .kpi-center-box {
//   flex: 1 1 auto;
//   width: 100%;
//   display: flex;
//   flex-direction: column;
//   align-items: center;          /* centro horizontal */
//   justify-content: center;      /* centro vertical */
//   gap: .35rem;
//   text-align: center;
// }

/* Tamaño y peso del valor */
.kpi-card.kpi-center .kpi {
  font-size: 3.2rem;            /* sube/baja a gusto (p. ej. 3.6rem) */
  line-height: 1;
  font-weight: 800;             /* negrita */
}
.kpi-card.kpi-center .muted {
  opacity: .75;
  font-weight: 600;
}

/* Contenedor de las 2 filas de KPIs */
.kpi-grid-2rows {
  display: grid;
  grid-template-columns: repeat(5, 1fr);  /* Total + 4 cards */
  grid-auto-rows: 140px;                  /* alto base por fila */
  gap: 1rem;
  align-items: stretch;
}

/* El card del total ocupa 2 filas de la primera columna */
.kpi-grid-2rows .kpi-total {
  grid-column: 1 / 2;
  grid-row: 1 / span 2;
}

/* Asegura que los demás items no “invadan” la col 1 fila 2 */
.kpi-grid-2rows > :not(.kpi-total) {
  min-height: 140px;
}

/* Responsivo: cuando no quepan 5 columnas, colapsa de forma amable */
@media (max-width: 1200px) {
  .kpi-grid-2rows { grid-template-columns: repeat(4, 1fr); } /* total + 3 */
}
@media (max-width: 992px) {
  .kpi-grid-2rows { grid-template-columns: repeat(2, 1fr); }
  .kpi-grid-2rows .kpi-total { grid-column: 1 / -1; grid-row: auto; } /* en pantallas chicas que no span 2 filas */
}

/* Card “Total PQRs” centrado horizontal y vertical */
.kpi-card.kpi-center {
  /* que el card use todo el alto de su celda del grid */
  height: 100%;
  display: flex;
  flex-direction: column;

  /* el body debe estirarse para poder centrar contenido */
  .p-card-body {
    flex: 1;                      /* ocupa todo el resto debajo del header */
    display: flex;
    flex-direction: column;

    /* PrimeNG inserta .p-card-content dentro del body */
    .p-card-content {
      flex: 1;                    /* ocupa todo el body */
      display: flex;
      align-items: center;        /* centrado vertical */
      justify-content: center;    /* centrado horizontal */
    }
  }

  /* caja del número */
  .kpi-center-box {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;      /* por si no existiera .p-card-content */
    width: 100%;
  }

  /* tamaño y peso del valor */
  .kpi {
    font-size: 3.2rem;            /* más grande */
    font-weight: 800;             /* negrita */
    line-height: 1;
  }
  .muted { margin-top: .25rem; }
}


// pqrs x tipo y otros

/* Fila de filtros compacta */
.filter-row .p-inputtext {
  min-width: 8rem;
}

/* Alinear números a la derecha en tablas “seg-table” */
.seg-table .text-right {
  text-align: right;
}

/* Tablas responsivas con números compactos */
.seg-table td.num, .seg-table td.text-right {
  font-variant-numeric: tabular-nums;
}

/* Cards de tablas con un poco de aire */
.eq-card .p-table {
  --row-gap: .25rem;
}


.p-table tfoot tr td {
  background: var(--surface-50); /* o el color que uses para footers */
  font-weight: 700;
}
.p-table .text-right { text-align: right; }

